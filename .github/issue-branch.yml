name: pm / issues

on:
    issues:
        types: [assigned]

jobs:
    create_issue_branch_job:
        runs-on: ubuntu-latest
        if: github.event.action == 'assigned'
        steps:
			- name: Create Issue Branch
			  uses: robvanderleek/create-issue-branch@master
			  id: create-issue-branch
			  env:
			    GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
			  branches:
				- label: enhancement
					prefix: feature/
				- label: bug
					prefix: bugfix/
    		
			- name: choose a pr template
			  if: steps.create-issue-branch.outputs.branchName != ''
			  id: template
			  env:
			    BRANCH_NAME: ${{ steps.create-issue-branch.outputs.branchName }}
			  run: |
				  branch=$BRANCH_NAME
				  if [[ $branch =~ ^fix/ ]]; then \
					template="bug.md"; \
				  elif [[ $branch =~ ^feat/ ]]; then \
					template="feature.md"; \
				  elif [[ $branch =~ ^chore/ ]]; then \
					template="chore.md"; \
				  elif [[ $branch =~ ^docs/ ]]; then \
					template="documentation.md"; \
				  fi
				  echo "::set-output name=template-name::$template"